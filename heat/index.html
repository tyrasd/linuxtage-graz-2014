<!DOCTYPE html>
<html>
<head>
    <title>Fahrradparkpl√§tze</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--leaflet-->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="leaflet-heat.js"></script>
    <script src="bikeparking.geojson"></script>
</head>
<body>
    <div id="map" style="position:absolute; top:0;left:0;bottom:0;right:0;"></div>
 
    <script>
        var zoom = 13;
        var map = L.map('map', {minZoom: zoom, maxZoom: zoom}).setView([47.0708101, 15.4382918], zoom);
 
        L.tileLayer('http://b.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="osm.org">OpenStreetMap</a> contributors'
        }).addTo(map);

        var max = Math.max.apply(Math, bikeparkings.features.map(function(feature) { return feature.properties.capacity*1 || 4; }));
        var latlngs = bikeparkings.features
            .map(function (feature) {
            var capacity = feature.properties.capacity*1 || 4;
            var geom;
            if (feature.geometry.type === "Point")
                geom = feature.geometry.coordinates;
            else
                geom = feature.geometry.coordinates[0][0];
            var geom = geom.reverse();
            geom.alt = Math.sqrt(capacity/max);
            return geom;
        });

        var heat = L.heatLayer(latlngs, {
            radius: 15,
            blur: 30,
            maxZoom: zoom,
        }).addTo(map);
    </script>
</body>
</html>